<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noble Quran App</title>
<link href="[https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css](https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css)" rel="stylesheet">
<link href="[https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css](https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css)" rel="stylesheet">
<link href="[https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Outfit:wght@300;400;500;600&display=swap](https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Outfit:wght@300;400;500;600&display=swap)" rel="stylesheet">
<style>
:root {
--primary: #00695c; /* Islamic Green */
--gold: #cfb53b;
--bg-light: #f8f9fa;
--text-dark: #2c3e50;
}
body {
font-family: 'Outfit', sans-serif;
background-color: var(--bg-light);
height: 100vh;
overflow: hidden;
}
/* --- Islamic Loader CSS --- */
#loader-overlay {
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: white;
z-index: 9999;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
}
.rub-el-hizb {
position: relative;
width: 60px;
height: 60px;
animation: spin 3s linear infinite;
}
.square {
position: absolute;
top: 0; left: 0;
width: 60px; height: 60px;
border: 4px solid var(--primary);
box-sizing: border-box;
}
.square:nth-child(2) {
transform: rotate(45deg);
}
.loader-text {
margin-top: 20px;
color: var(--primary);
font-weight: 600;
letter-spacing: 1px;
animation: pulse 1.5s infinite;
}
@keyframes spin { 100% { transform: rotate(360deg); } }
@keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
/* --- Layout --- */
.app-container {
display: flex;
height: 100vh;
width: 100vw;
}
/* Sidebar (Surah List) */
.sidebar {
width: 350px;
background: white;
border-right: 1px solid #dee2e6;
display: flex;
flex-direction: column;
z-index: 100;
}
.sidebar-header {
padding: 1.5rem;
background: var(--primary);
color: white;
}
.search-box {
position: relative;
margin-top: 10px;
}
.search-box input {
width: 100%;
padding: 10px 40px 10px 15px;
border-radius: 20px;
border: none;
outline: none;
}
.search-box i {
position: absolute;
right: 15px;
top: 50%;
transform: translateY(-50%);
color: #aaa;
}
.surah-list {
flex: 1;
overflow-y: auto;
padding: 0;
margin: 0;
list-style: none;
}
.surah-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px 20px;
border-bottom: 1px solid #f1f1f1;
cursor: pointer;
transition: all 0.2s;
}
.surah-item:hover {
background-color: #f0fdf4;
}
.surah-item.active {
background-color: #e0f2f1;
border-left: 4px solid var(--primary);
}
.surah-num {
background: var(--bg-light);
color: var(--primary);
width: 35px; height: 35px;
display: flex;
align-items: center; justify-content: center;
border-radius: 8px;
font-weight: bold;
font-size: 0.9rem;
margin-right: 15px;
transform: rotate(45deg);
}
.surah-num span { transform: rotate(-45deg); }
.surah-details h6 { margin: 0; font-weight: 600; color: var(--text-dark); }
.surah-details small { color: #888; }
.surah-arabic { font-family: 'Amiri', serif; font-size: 1.4rem; color: var(--primary); }
/* Main Content (Reader) */
.main-content {
flex: 1;
display: flex;
flex-direction: column;
background-color: #f8f9fa;
position: relative;
}
.reader-header {
height: 60px;
background: white;
border-bottom: 1px solid #dee2e6;
display: flex;
align-items: center;
padding: 0 20px;
box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
#reader-scroll-area {
flex: 1;
overflow-y: auto;
padding: 20px;
padding-bottom: 100px; /* Space for player */
}
/* Ayah Card */
.ayah-card {
background: white;
border-radius: 12px;
padding: 25px;
margin-bottom: 15px;
box-shadow: 0 2px 10px rgba(0,0,0,0.03);
border: 1px solid transparent;
transition: border-color 0.3s;
}
.ayah-card.playing {
border-color: var(--primary);
background-color: #fbfdfc;
}
.ayah-meta {
display: flex;
justify-content: space-between;
margin-bottom: 15px;
color: var(--primary);
font-size: 0.85rem;
font-weight: 500;
}
.ayah-arabic {
font-family: 'Amiri', serif;
font-size: 2rem;
text-align: right;
line-height: 2.4;
color: #000;
margin-bottom: 20px;
direction: rtl;
}
.ayah-trans {
font-size: 1.1rem;
color: #555;
line-height: 1.6;
}
/* Audio Player /
.audio-bar {
position: absolute;
bottom: 0; left: 0; right: 0;
background: white;
padding: 10px 20px;
border-top: 1px solid #eee;
box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
display: flex;
align-items: center;
justify-content: space-between;
z-index: 500;
display: none; / Hidden initially */
}
.play-btn {
width: 50px; height: 50px;
border-radius: 50%;
background: var(--primary);
color: white;
border: none;
font-size: 1.2rem;
display: flex;
align-items: center; justify-content: center;
box-shadow: 0 4px 10px rgba(0,105,92,0.3);
cursor: pointer;
}
/* Mobile Responsive Logic */
.back-btn { display: none; margin-right: 15px; border:none; background:none; font-size: 1.2rem;}
@media (max-width: 768px) {
.sidebar {
width: 100%;
position: absolute;
height: 100%;
transition: transform 0.3s ease-in-out;
}
.main-content {
width: 100%;
position: absolute;
height: 100%;
transform: translateX(100%);
transition: transform 0.3s ease-in-out;
}
/* States for Mobile */
.app-container.show-reader.sidebar { transform: translateX(-100%); }
.app-container.show-reader.main-content { transform: translateX(0); }
.back-btn { display: block; }
.reader-header h5 { font-size: 1rem; }
.ayah-arabic { font-size: 1.6rem; }
}
/* Empty State */
.empty-state {
text-align: center;
margin-top: 20vh;
color: #aaa;
}
.empty-state i { font-size: 4rem; margin-bottom: 1rem; color: #ddd; }
</style>
</head>
<body>
<div id="loader-overlay">
<div class="rub-el-hizb">
<div class="square"></div>
<div class="square"></div>
</div>
<div class="loader-text" id="loader-msg">Connecting to Quran Cloud...</div>
</div>
<div class="app-container" id="app-container">
<aside class="sidebar">
<div class="sidebar-header">
<div class="d-flex justify-content-between align-items-center mb-2">
<h4 class="m-0"><i class="fas fa-quran me-2"></i>Al-Quran</h4>
<small>Digital Mushaf</small>
</div>
<div class="search-box">
<input type="text" id="searchInput" placeholder="Search Surah (e.g. Yasin)...">
<i class="fas fa-search"></i>
</div>
</div>
<ul class="surah-list" id="surahList">
</ul>
</aside>
<main class="main-content">
<div class="reader-header">
<button class="back-btn" onclick="showSurahList()"><i class="fas fa-arrow-left"></i></button>
<div style="flex:1">
<h5 class="m-0" id="headerTitle">Select a Surah</h5>
<small class="text-muted" id="headerSubtitle"></small>
</div>
</div>
<div id="reader-scroll-area">
<div class="empty-state">
<i class="fas fa-book-open"></i>
<p>Select a Surah from the list to begin reading.</p>
</div>
</div>
</main>
</div>
<div class="audio-bar" id="audioBar">
<div class="d-flex align-items-center" style="gap:15px; flex:1;">
<div class="d-none d-sm-block">
<strong id="audioSurahName">Surah Name</strong>
<div style="font-size:0.8rem; color:#666;" id="audioAyahNum">Ayah 1</div>
</div>
</div>
<div class="d-flex align-items-center" style="gap:15px;">
<button class="btn btn-sm btn-light rounded-circle" onclick="prevAyah()"><i class="fas fa-step-backward"></i></button>
<button class="play-btn" onclick="togglePlay()" id="playPauseBtn"><i class="fas fa-play"></i></button>
<button class="btn btn-sm btn-light rounded-circle" onclick="nextAyah()"><i class="fas fa-step-forward"></i></button>
</div>
</div>
<audio id="quranAudio" onended="autoPlayNext()"></audio>
<script>
// --- Config ---
// Using codetabs proxy for better reliability with JSON
const PROXY_URL = "https://api.codetabs.com/v1/proxy?quest=";
const BASE_URL = "https://api.alquran.cloud/v1";
// --- State ---
let allSurahs =;
let currentSurahData = null; // Stores Ayahs
let currentAyahIndex = 0;
let isPlaying = false;
const audioObj = document.getElementById('quranAudio');
// --- Init ---
window.onload = function() {
fetchSurahList();
};
// --- 1. Fetch Surah List ---
async function fetchSurahList() {
updateLoader("Loading Surah List...");
// Try Direct first (CORS is enabled on alquran.cloud usually)
let url = ${BASE_URL}/surah;
try {
// Try direct fetch
let response = await fetch(url);
if(!response.ok) throw new Error("Direct fetch failed");
let json = await response.json();
handleSurahListSuccess(json);
} catch (directError) {
console.warn("Direct fetch failed, trying proxy...", directError);
// Fallback to Proxy
try {
let proxyUrl = PROXY_URL + encodeURIComponent(url);
let response = await fetch(proxyUrl);
let json = await response.json();
handleSurahListSuccess(json);
} catch (proxyError) {
showError("Failed to load data. Please check internet connection.");
}
}
}
function handleSurahListSuccess(json) {
if(json.code === 200) {
allSurahs = json.data;
renderSurahList(allSurahs);
hideLoader();
} else {
showError("API Error: " + json.status);
}
}
// --- 2. Render List ---
function renderSurahList(list) {
const listEl = document.getElementById('surahList');
listEl.innerHTML = list.map(surah => <li class="surah-item" onclick="loadSurah(${surah.number}, '${surah.englishName}', '${surah.name}')"> <div class="d-flex align-items-center"> <div class="surah-num"><span>${surah.number}</span></div> <div class="surah-details"> <h6>${surah.englishName}</h6> <small>${surah.englishNameTranslation} • ${surah.numberOfAyahs} Ayahs</small> </div> </div> <div class="surah-arabic">${surah.name.replace('سُورَةُ', '').trim()}</div> </li>).join('');
}
// --- 3. Search Functionality ---
document.getElementById('searchInput').addEventListener('input', (e) => {
const term = e.target.value.toLowerCase();
const filtered = allSurahs.filter(s =>
s.englishName.toLowerCase().includes(term) |
|
s.englishNameTranslation.toLowerCase().includes(term) ||
s.number.toString() === term
);
renderSurahList(filtered);
});
// --- 4. Load Surah Detail ---
async function loadSurah(number, engName, arName) {
// UI Switch
if(window.innerWidth <= 768) {
document.getElementById('app-container').classList.add('show-reader');
}
// Set Header
document.getElementById('headerTitle').textContent = engName;
document.getElementById('headerSubtitle').textContent = arName;
// Show Loader inside reader area
const scrollArea = document.getElementById('reader-scroll-area');
scrollArea.innerHTML = <div class="text-center mt-5"> <div class="rub-el-hizb" style="width:40px;height:40px;margin:0 auto;"> <div class="square" style="border-width:3px;"></div> <div class="square" style="border-width:3px;"></div> </div> <p class="mt-3 text-muted">Loading ${engName}...</p> </div>;
// Fetch Data (Arabic + English + Audio)
// Using endpoint that gets multiple editions
const url = ${BASE_URL}/surah/${number}/editions/quran-uthmani,en.sahih,ar.alafasy;
try {
// Try direct first
let response = await fetch(url);
if(!response.ok) throw new Error("Direct fail");
let json = await response.json();
processSurahData(json);
} catch (e) {
// Proxy Fallback
try {
let response = await fetch(PROXY_URL + encodeURIComponent(url));
let json = await response.json();
processSurahData(json);
} catch (err) {
scrollArea.innerHTML = <div class="alert alert-danger m-3">Failed to load Surah text. Try again.</div>;
}
}
}
function processSurahData(json) {
if(json.code!== 200) return;
// Data Structure: data=Arabic, data=English, data=Audio
const arabicAyahs = json.data.ayahs;
const englishAyahs = json.data.ayahs;
const audioAyahs = json.data.ayahs;
// Merge into one clean array
currentSurahData = arabicAyahs.map((ayah, i) => ({
number: ayah.number, // Global ID
numberInSurah: ayah.numberInSurah,
text: ayah.text,
trans: englishAyahs[i].text,
audio: audioAyahs[i].audio, // URL
juz: ayah.juz
}));
renderAyahs(currentSurahData);
// Prepare Player
document.getElementById('audioBar').style.display = 'flex';
currentAyahIndex = 0;
updatePlayerInfo();
// Don't auto play immediately on load, wait for user interaction
isPlaying = false;
updatePlayBtn();
}
function renderAyahs(ayahs) {
const scrollArea = document.getElementById('reader-scroll-area');
let html = '';
// Bismillah Handling: Check if first ayah has it, or if we need to add it purely visual
// (Note: API usually includes Bismillah in text for Surah 1, but splits for others.
// For simplicity, we render what API gives)
html += ayahs.map((ayah, i) => <div class="ayah-card" id="ayah-card-${i}" onclick="playSpecificAyah(${i})"> <div class="ayah-meta"> <span>${ayah.numberInSurah}</span> <span>Juz ${ayah.juz}</span> </div> <div class="ayah-arabic">${ayah.text}</div> <div class="ayah-trans">${ayah.trans}</div> </div>).join('');
// Add padding at bottom for player
html += '<div style="height: 60px;"></div>';
scrollArea.innerHTML = html;
scrollArea.scrollTop = 0;
}
// --- 5. Audio Logic ---
function playSpecificAyah(index) {
currentAyahIndex = index;
loadAndPlayAudio();
}
function loadAndPlayAudio() {
if(!currentSurahData) return;
const ayah = currentSurahData[currentAyahIndex];
// Highlight Card
document.querySelectorAll('.ayah-card').forEach(c => c.classList.remove('playing'));
const card = document.getElementById(ayah-card-${currentAyahIndex});
if(card) {
card.classList.add('playing');
// Scroll into view logic
card.scrollIntoView({behavior: "smooth", block: "center"});
}
// Set Audio
audioObj.src = ayah.audio;
audioObj.play().catch(e => console.log("Play error", e));
isPlaying = true;
updatePlayerInfo();
updatePlayBtn();
}
function togglePlay() {
if(!currentSurahData) return;
if(isPlaying) {
audioObj.pause();
isPlaying = false;
} else {
if(!audioObj.src) loadAndPlayAudio(); // First play
else audioObj.play();
isPlaying = true;
}
updatePlayBtn();
}
function autoPlayNext() {
if(currentAyahIndex < currentSurahData.length - 1) {
currentAyahIndex++;
loadAndPlayAudio();
} else {
isPlaying = false;
updatePlayBtn();
}
}
function nextAyah() {
if(currentAyahIndex < currentSurahData.length - 1) {
currentAyahIndex++;
loadAndPlayAudio();
}
}
function prevAyah() {
if(currentAyahIndex > 0) {
currentAyahIndex--;
loadAndPlayAudio();
}
}
function updatePlayerInfo() {
const ayah = currentSurahData[currentAyahIndex];
document.getElementById('audioAyahNum').innerText = Ayah ${ayah.numberInSurah};
document.getElementById('audioSurahName').innerText = document.getElementById('headerTitle').textContent;
}
function updatePlayBtn() {
const btn = document.getElementById('playPauseBtn');
btn.innerHTML = isPlaying? '<i class="fas fa-pause"></i>' : '<i class="fas fa-play"></i>';
}
// --- Helpers ---
function showSurahList() {
document.getElementById('app-container').classList.remove('show-reader');
// Pause audio when going back? Optional. keeping it playing allows background listening.
}
function updateLoader(msg) {
document.getElementById('loader-msg').innerText = msg;
document.getElementById('loader-overlay').style.display = 'flex';
}
function hideLoader() {
document.getElementById('loader-overlay').style.display = 'none';
}
function showError(msg) {
document.getElementById('loader-overlay').innerHTML = <div class="text-center text-danger p-4"> <i class="fas fa-exclamation-triangle fa-3x mb-3"></i> <h5>Error</h5> <p>${msg}</p> <button class="btn btn-outline-danger mt-3" onclick="location.reload()">Retry</button> </div>;
}
</script>
</body>
</html>
